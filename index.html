<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>maug: maug</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxstyle.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">maug
   </div>
   <div id="projectbrief">Quick and dirty C mini-augmentation library.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="doc-content">
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">maug </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_README"></a></p>
<p>Augmented minimal standard library for C89 and legacy compilers.</p>
<p><b>The API is currently in flux and is not yet completely final!</b></p>
<p>Current maug-based projects may be found under <a href="https://github.com/topics/maug">The maug topic on GitHub</a>!</p>
<h1>Design Constraints</h1>
<p>Maug has the following design goals and constraints:</p>
<ul>
<li>Must work in C89 compilers. C99-like features like stdint or snprintf are available by internal implementation.</li>
<li>Memory allocation uses a flat model (calloc/free), with no handle management.</li>
<li>Standard library calls are allowed, so long as they are universally available even in very old C89 compilers.</li>
</ul>
<h1>Roadmap</h1>
<ul>
<li>Clearly enumerate which headers rely on which to create modular hierarchy.</li>
<li>Solidify API.</li>
<li>Setup Makefile to compile .solib/.dll/.ovl dynamic libs.</li>
<li>Square-tile-based isometric engine.</li>
<li>Reimplement retrotile with vectors for tiledefs.</li>
<li>Replace iffy semi-vectors in mhtml/mcss with vectors.</li>
<li>Replace obj vertice arrays with vectors in retroglu.</li>
<li>Implement lambdas in mlisp with separators for pruning sequentally added env args.</li>
<li>Implement resolution detection in Windows CE.</li>
<li>Implement timing/blit mode setting options on all platforms.</li>
</ul>
<h1>Modules</h1>
<h2>Makefiles</h2>
<p>Inside of the <code>make</code> subdirectory are a number of Makefiles that can be included from a project's Makefile in order to more conveniently build assets.</p>
<h2>retroflt</h2>
<p><code>#include &lt;<a class="el" href="retroflt_8h.html" title="Abstraction layer header for retro systems.">retroflt.h</a>&gt;</code></p>
<p>RetroFlat is a rough, quick-and-dirty compatibility layer for making graphical programs that work on Win16 (32-bit via OpenWatcom's Win386), MS-DOS (32-bit via DOS/32a or DOS4GW via Allegro), and possibly other platforms in the future.</p>
<p>This documentation is also available at <a href="https://indigoparadox.github.io/maug/group__maug__retroflt.html">https://indigoparadox.github.io/maug/group__maug__retroflt.html</a>.</p>
<h2>mtypes</h2>
<p><code>#include &lt;mtypes.h&gt;</code></p>
<p>Rough common approximation of types for interoperability between our projects.</p>
<p>Includes common types from stdint.h, guaranteed to be of the named size:</p>
<ul>
<li>int8_t</li>
<li>uint8_t</li>
<li>int16_t</li>
<li>uint16_t</li>
<li>int32_t</li>
<li>uint32_t</li>
</ul>
<p>When using this header, do not include stdint.h. This header will include it if the current platform supports it. Otherwise, it will improvise.</p>
<h2>uprintf</h2>
<p><code>#include &lt;<a class="el" href="uprintf_8h.html">uprintf.h</a>&gt;</code></p>
<p>An augmented printf for tracing, debugging, and error reporting.</p>
<p>To use, include <a class="el" href="uprintf_8h.html">uprintf.h</a> and call <code>logging\_init()</code> in program startup.</p>
<p>Be sure to call <code>logging\_shutdown()</code> on program cleanup.</p>
<p>Logging can then be performed by calling:</p>
<ul>
<li><code>debug\_printf( lvl, format, ... )</code> - Prints debug message.<ul>
<li><code>lvl</code> - Immediacy level of debug message. See DEBUG_THRESHOLD below.</li>
<li><code>format</code> - <code>printf()</code>-style format string.</li>
<li><code>...</code> - Variable arguments to <code>format</code>.</li>
</ul>
</li>
<li><code>error\_printf( format, ... )</code> - Prints to stderr.<ul>
<li><code>format</code> - <code>printf()</code>-style format string.</li>
<li><code>...</code> - Variable arguments to <code>format</code>.</li>
</ul>
</li>
</ul>
<p>uprintf's behavior can be modified by defining the following before inclusion:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Define   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">platform_file   </td><td class="markdownTableBodyNone">Type to use instead of stdlib's FILE for log ptr.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">platform_fopen   </td><td class="markdownTableBodyNone">Function to use instead of fopen() to create a log ptr.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">platform_fclose   </td><td class="markdownTableBodyNone">Function to close log ptr.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">platform_fflush   </td><td class="markdownTableBodyNone">Function to flush log ptr to buffer.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">platform_fprintf   </td><td class="markdownTableBodyNone">Function to print to log ptr with a format string.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">DEBUG_THRESHOLD   </td><td class="markdownTableBodyNone">debug_printf() w/ this or higher lvl will be displayed.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">DEBUG_LOG   </td><td class="markdownTableBodyNone">If defined, debug will be output to LOG_FILE_NAME.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">ANCIENT_C   </td><td class="markdownTableBodyNone">Use static functions where vararg macros unsupported.   </td></tr>
</table>
<h1>Troubleshooting</h1>
<h2>size of segment x exceeds 64k by y bytes</h2>
<p>RetroFlat can be quite bulky for 16-bit DOS. Please try adding RETROFLAT_DOS_MEM_LARGE=1 to your Makefile before Makefile.inc is included to enable a large code model.</p>
<h2>Cache loading errors which <a class="el" href="retrogxc_8h_source.html">retrogxc.h</a> is never included</h2>
<p>For 16-bit builds, <code>GLOBAL\_DEFINES += -DRETROFLAT\_NO\_RETROGXC</code> must be specified in the Makefile explicitly, or the cache will be enabled in the DOS stubs.</p>
<h2>Emscripten in Debian Complains About FROZEN_CACHE</h2>
<p>Do the following, to create a mutable emscripten cache in your <code>$HOME</code>:</p>
<ul>
<li>Make <code>$HOME/.emscripten</code> directory.</li>
<li>Copy <code>/usr/share/emscripten/cache/</code> to <code>$HOME/.emscripten/cache</code></li>
<li>Copy <code>/usr/share/emscripten/.emscripten</code> to <code>$HOME/.emscripten/config</code></li>
<li>In <code>$HOME/.emscripten/config</code>:<ul>
<li>Set <code>FROZEN\_CACHE = False</code>.</li>
<li>Set &lsquo;CACHE = &rsquo;/home/username/.emscripten/cache'<code>, where</code>/home/username<code>is whatever</code>$HOME` expands to.</li>
</ul>
</li>
</ul>
<p>After doing this, building with emcc should work. </p>
</div></div><!-- PageDoc -->
<a href="doxygen_crawl.html"></a>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2
</small></address>
</div><!-- doc-content -->
</body>
</html>
